<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>AIvRealOpniHaskolinnLeikur</title>
    <link rel="stylesheet" href="./style.css">

  </head>
    
  <body>
  <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AI or alv√∂ru?</title>

    <style>
    </style>
  </head>

  <body>
    <div class="wrap">
      <header>
        <div class="brand">AI e√∞a <span>Alv√∂ru?</span></div>
       <a
  href="https://www.oh.ru.is"
  class="meta meta-link"
  target="_blank"
  rel="noopener noreferrer"
>
  Opni H√°sk√≥linn
</a>
      </header>

      <div class="card">
        <div class="statusbar">
          <div class="pill" id="roundPill">Umfer√∞ ‚Äì</div>
          <div class="pill" id="scorePill">Stig: 0</div>
        </div>

        <div id="game">
          <p
            id="prompt"
            class="center"
            style="margin: 8px 0 18px; color: var(--muted)"
          >
            Hvor myndin er ger√∞ af AI?
            Smelltu √° hana.
          </p>

          <div class="gallery">
            <button
              class="imgcard"
              id="leftCard"
              aria-label="Left image button"
              type="button"
            >
              <span class="label" id="leftLabel">A</span>
              <img id="leftImg" alt="Left option" />
            </button>

            <button
              class="imgcard"
              id="rightCard"
              aria-label="Right image button"
              type="button"
            >
              <span class="label" id="rightLabel">B</span>
              <img id="rightImg" alt="Right option" />
            </button>
          </div>

          <div class="center">
            <div id="feedback" class="feedback" aria-live="polite"></div>

            <button id="nextBtn" class="cta muted" style="display: none" type="button">
              N√¶sta umfer√∞ ‚Üí
            </button>
          </div>
        </div>

        <div id="result" style="display: none">
          <h2 class="center" style="margin: 0 0 8px">Vel gert! üéâ</h2>

          <p class="center" style="margin: 0 0 20px; color: var(--muted)">
            Stig: <strong id="finalScore">0 / 0</strong>
          </p>

          <form id="emailForm" class="emailbox">
            <label for="email">
              Skr√°√∞u netfangi√∞ √æitt og √æ√∫ getur unni√∞ fr√≠tt n√°mskei√∞ hj√° Opna
              h√°sk√≥lanum!
            </label>

            <input
              id="email"
              name="email"
              type="email"
              placeholder="you@example.edu"
              required
            />

            <button class="cta" type="submit">Senda inn netfang</button>

            <p class="small" style="margin: 6px 0 0">
              Me√∞ √æv√≠ a√∞ taka √æ√°tt √≠ leiknum sam√æykkir √æ√∫ a√∞ f√° t√∂lvup√≥sta fr√°
              Opna h√°sk√≥lanum. √û√∫ getur afskr√°√∞ √æig af listanum hven√¶r sem er.
            </p>

            <p id="submitMsg" class="small" aria-live="polite"></p>
          </form>
        </div>
      </div>

      <footer>Vi√∞ s√∂fnum a√∞eins netfanginu √æ√≠nu og stigum.</footer>
    </div>

    <script>
      // Prevent double-init (CodePen can re-run scripts)
      if (window.__AI_OR_REAL_INIT__) {
        console.warn("Game already initialized ‚Äî skipping duplicate init.");
      } else {
        window.__AI_OR_REAL_INIT__ = true;

        /***********************
         * CONFIG
         ***********************/
        const TARGET_ROUNDS = 5;

        const REAL_IMAGES = [
          "https://drive.google.com/thumbnail?id=1f__cD5D7gxhkn08M3chwPrAwi0WElpyf&sz=w1600",
          "https://drive.google.com/thumbnail?id=1QjHd6Zb4sAM9hp403YmQh_pLt4tZhTDY&sz=w1600",
          "https://drive.google.com/thumbnail?id=1jsc3zXMEV2ZrJCTSFHZULBP3gmibM9yW&sz=w1600",
          "https://drive.google.com/thumbnail?id=1IhV90Lkm-diTCO_FLVZ-O97Eq73TKmgM&sz=w1600",
          "https://drive.google.com/thumbnail?id=15mPfjjERyWtdgj8BswavwoPwPzIyizb3&sz=w1600",
          "https://drive.google.com/thumbnail?id=1fl5XJgc5TUTpU56acId65dyw3F5EiEn0&sz=w1600",
          "https://drive.google.com/thumbnail?id=1xbU_YZd8DOQ4AFgiobMxE2vFbQEmD_Vh&sz=w1600",
          "https://drive.google.com/thumbnail?id=1QOtPS052du0dL9_bDAiLK6WIx_73JXz6&sz=w1600",
          "https://drive.google.com/thumbnail?id=18t_3k3EiexceGSkxTQQe3_45I-3hMgh8&sz=w1600",
          "https://drive.google.com/thumbnail?id=14SdmP_i8NPtkjUNRL3EfPneomJmhYSe4&sz=w1600",
          "https://drive.google.com/thumbnail?id=1DVb9UihZWKlpe7BjFyp1BkXPIH9a7Ugm&sz=w1600",
          "https://drive.google.com/thumbnail?id=1ww2UNEVBUD0aClolknwHJBckQWaUwuyF&sz=w1600",
          "https://drive.google.com/thumbnail?id=1HToiRpICSby4Z7IQTC159r4CUwbaaJ-4&sz=w1600",
          "https://drive.google.com/thumbnail?id=1Ajpr4yqIQ-J_2s4keeWtwoyiEIcnplGY&sz=w1600",
          "https://drive.google.com/thumbnail?id=1Z6_GEFgRs16_8UKsKl60t8pyBmjvK4AY&sz=w1600",
          "https://drive.google.com/thumbnail?id=1iIjSDXROqtXwX7yOXrnX2BQ3Mz1L4tQE&sz=w1600",
          "https://drive.google.com/thumbnail?id=1og6sZpi_IPpOgD-r2EcnK6sfCHfzdIp8&sz=w1600",
          "https://drive.google.com/thumbnail?id=1Lc_-UA3xFuOHDS4gNJqS6MAyYwtRAHrx&sz=w1600",
        ];

        const AI_IMAGES = [
          "https://drive.google.com/thumbnail?id=1WuLax8npaA3GkScYUUNsPJk88JMSg_ze&sz=w1600",
          "https://drive.google.com/thumbnail?id=1TyrgXGwd8WvppmtNhqcquQWwMW-DdcBD&sz=w1600",
          "https://drive.google.com/thumbnail?id=1K-CW5IpVVmHzgri--db4psOUNF5PjdyO&sz=w1600",
          "https://drive.google.com/thumbnail?id=1akVDFEepp_wCBJ1BGaQYrKUTOrKwjIfm&sz=w1600",
          "https://drive.google.com/thumbnail?id=11sXgA21twskulfb4vVTanBP3wIAtvedr&sz=w1600",
          "https://drive.google.com/thumbnail?id=1cFCJrEqD9-8lMG-FDMiktOPAp7fIaV10&sz=w1600",
          "https://drive.google.com/thumbnail?id=1lqf85hOdAiAI0RPU_fZC_t4wDqVR7Zw4&sz=w1600",
          "https://drive.google.com/thumbnail?id=1u_dc6WgndvBoCeoKcLLh7ZuXT11arm0j&sz=w1600",
          
          "https://drive.google.com/thumbnail?id=1dMyMFf9nq9QbbVgPHz1y8hri2dEI0z0_&sz=w1600",
          "https://drive.google.com/thumbnail?id=1kY8qemb5SxKaq74lGtPg02DoV9DEL7ee&sz=w1600",
          "https://drive.google.com/thumbnail?id=1CA5g7X9e4roDrsIQVd9JsLiSumcEctLL&sz=w1600",
          "https://drive.google.com/thumbnail?id=1AlQK2FWL-eE4jlaHGk2Xa_uFF1BDQOlP&sz=w1600",
          "https://drive.google.com/thumbnail?id=1rL6CoA3Y6cBKRRsFogPM_FM4nDoBVopk&sz=w1600",
          "https://drive.google.com/thumbnail?id=1I3aN6aJz7_1DvPamZI5dSMny--hheC0C&sz=w1600",
          "https://drive.google.com/thumbnail?id=16aQ-Paxt8GvNMkSnZuIcr53pEmT3MTu4&sz=w1600",
          "https://drive.google.com/thumbnail?id=1BtLk4na3zHcA_1Z8f7d0a8A6bYftgrRO&sz=w1600",
          "https://drive.google.com/thumbnail?id=1aXlMmwgKtx9VamJOOhiOpWkh7D5zXwY-&sz=w1600",
          "https://drive.google.com/thumbnail?id=1zHx9sQ1NQRGZBIrwlnsIGDnTEZwqMC47&sz=w1600",
        ];

        const WEBHOOK_URL =
          "https://script.google.com/macros/s/AKfycbwW602WB7vDPF4mitoW3CilOOn1QVwmK0SN3YidDgSyc9YBN2kZdOGOK9m4KFKL09ri/exec";
        const SOURCE_TAG = "ai-or-real-game";

        /***********************
         * HELPERS
         ***********************/
        function shuffleInPlace(arr) {
          for (let i = arr.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [arr[i], arr[j]] = [arr[j], arr[i]];
          }
          return arr;
        }

        function makeDeck() {
          const reals = shuffleInPlace([...REAL_IMAGES]);
          const ais = shuffleInPlace([...AI_IMAGES]);
          const rounds = Math.min(TARGET_ROUNDS, reals.length, ais.length);

          const d = [];
          for (let i = 0; i < rounds; i++) {
            d.push({
              real: reals[i],
              ai: ais[i],
              aiLeft: Math.random() < 0.5,
            });
          }
          return d;
        }

        function preloadImages(d) {
          const urls = [];
          d.forEach((p) => urls.push(p.real, p.ai));
          urls.forEach((u) => {
            const img = new Image();
            img.src = u;
          });
        }

        /***********************
         * GAME STATE + DOM
         ***********************/
        let round = 0;
        let score = 0;
        let deck = [];
        let picked = false;

        const roundPill = document.getElementById("roundPill");
        const scorePill = document.getElementById("scorePill");
        const promptEl = document.getElementById("prompt");
        const leftCard = document.getElementById("leftCard");
        const rightCard = document.getElementById("rightCard");
        const leftImg = document.getElementById("leftImg");
        const rightImg = document.getElementById("rightImg");
        const feedback = document.getElementById("feedback");
        const nextBtn = document.getElementById("nextBtn");
        const game = document.getElementById("game");
        const result = document.getElementById("result");
        const finalScore = document.getElementById("finalScore");
        const submitMsg = document.getElementById("submitMsg");
        const emailForm = document.getElementById("emailForm");
        const emailInput = document.getElementById("email");

        function setRoundUI() {
          roundPill.textContent = `Umfer√∞ ${round + 1} af ${deck.length}`;
          scorePill.textContent = `Stig: ${score}`;

          const current = deck[round];
          promptEl.textContent = "Hvor myndin er ger√∞ af AI?\nSmelltu √° hana.";

          leftImg.src = current.aiLeft ? current.ai : current.real;
          rightImg.src = current.aiLeft ? current.real : current.ai;

          feedback.textContent = "";
          feedback.className = "feedback";

          nextBtn.style.display = "none";

          picked = false;
          leftCard.disabled = false;
          rightCard.disabled = false;
        }

        function pick(side) {
          if (picked) return;
          picked = true;

          const current = deck[round];
          const correct =
            (side === "left" && current.aiLeft) ||
            (side === "right" && !current.aiLeft);

          if (correct) {
            score++;
            feedback.textContent = "R√©tt!";
            feedback.className = "feedback ok";
          } else {
            feedback.textContent = "√öps! Hin myndin var ger√∞ af AI.";
            feedback.className = "feedback bad";
          }

          // Update score immediately (important on last round)
          scorePill.textContent = `Stig: ${score}`;

          leftCard.disabled = true;
          rightCard.disabled = true;

          nextBtn.style.display = "inline-flex";


          nextBtn.textContent =
            round === deck.length - 1 ? "Sj√° ni√∞urst√∂√∞u ‚Üí" : "N√¶sta umfer√∞ ‚Üí";
        }

        function next() {
          round++;

          if (round >= deck.length) {
            game.style.display = "none";
            result.style.display = "block";
            finalScore.textContent = `${score} / ${deck.length}`;
            return;
          }

          setRoundUI();
        }

        function start() {
          deck = makeDeck();
          preloadImages(deck);

          round = 0;
          score = 0;
          picked = false;

          game.style.display = "block";
          result.style.display = "none";

          setRoundUI();
        }

        leftCard.addEventListener("click", () => pick("left"));
        rightCard.addEventListener("click", () => pick("right"));
        nextBtn.addEventListener("click", next);

        // Email submit logic (Apps Script)
        emailForm.addEventListener("submit", async (e) => {
          e.preventDefault();

          const email = emailInput.value.trim();
          submitMsg.textContent = "Submitting‚Ä¶";

          const payload = new URLSearchParams({
            email,
            score: String(score),
            rounds: String(deck.length),
            source: SOURCE_TAG,
          });

          try {
            const res = await fetch(WEBHOOK_URL, {
              method: "POST",
              headers: { "Content-Type": "application/x-www-form-urlencoded" },
              body: payload.toString(),
            });

            if (res.ok) {
              submitMsg.textContent = "Takk! N√∫ ert √æ√∫ √° listanum.";
              emailForm.reset();
            } else {
              submitMsg.textContent =
                "Submit failed. Please try again later or talk to a staff member.";
            }
          } catch (err) {
            submitMsg.textContent = "Network error. Please try again later.";
          }
        });

        start();
      }
    </script>
  </body>
</html>
    
  </body>
  
</html>
